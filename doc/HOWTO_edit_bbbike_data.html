<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>HOWTO - Daten in BBBike editieren</title><link rel="stylesheet" type="text/css" href="docbook5.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="de" class="article"><div class="titlepage"><div><div><h2 class="title"><a name="idm46037233739216"></a>HOWTO - Daten in BBBike editieren</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Slaven</span> <span class="surname">Rezi&#263;</span></h3><div class="affiliation"><div class="address"><p><br>
	    <code class="email">&lt;<a class="email" href="mailto:slaven@rezic.de">slaven@rezic.de</a>&gt;</code><br>
	  </p></div></div></div></div></div><div><p class="copyright">Copyright © 2005, 2006 Slaven Rezi&#263;</p></div><div><p class="pubdate">2009-04-04</p></div></div><hr></div><div class="toc"><p><b>Inhaltsverzeichnis</b></p><dl class="toc"><dt><span class="sect1"><a href="#idm46037233736368">1. Voraussetzungen</a></span></dt><dt><span class="sect1"><a href="#bbbikeadvanced">2. BBBike starten</a></span></dt><dt><span class="sect1"><a href="#idm46037233715184">3. Editiermodus</a></span></dt><dt><span class="sect1"><a href="#idm46037233712016">4. Straßen-Editor</a></span></dt><dt><span class="sect1"><a href="#idm46037233711760">5. Veröffentlichen der Ergänzungen</a></span></dt><dt><span class="sect1"><a href="#idm46037233642016">6. Nach dem Veröffentlichen</a></span></dt><dt><span class="sect1"><a href="#idm46037233639488">7. Erfassen anhand eines GPS-Tracks</a></span></dt><dt><span class="sect1"><a href="#idm46037233631200">8. Ein Exkurs über die verwendeten Layer und Attribute</a></span></dt><dt><span class="sect1"><a href="#idm46037233630944">9. Alternative Editiermöglichkeiten</a></span></dt><dt><span class="sect1"><a href="#idm46037233484864">10. Neue Layer auf Basis der Berliner BBBike-Daten</a></span></dt><dt><span class="sect1"><a href="#idm46037233483840">11. Eine komplett neue Datenbank aufbauen</a></span></dt><dt><span class="sect1"><a href="#alternatives">12. Alternativen</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233736368"></a>1. Voraussetzungen</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233728400"></a>1.1. Zeit</h3></div></div></div><p> Das Editieren der BBBike-Daten erfordert Zeit. Um "nur mal
  schnell" die Berliner oder Brandenburger Daten zu ergänzen, kann eine
  der unten aufgeführten <a class="link" href="#alternatives" title="12. Alternativen">Alternativen</a>
  zum Editieren oder die Anweisung zum <a class="link" href="#fastedit" title="9.1. Schnelles Erfassen von Daten">schnelle
  Editieren</a> verwendet werden. </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233726448"></a>1.2. Betriebssystem</h3></div></div></div><p>Zum Editieren ist ein POSIX-kompatibles System, also Linux oder Unix,
  empfehlenswert. Das Programm <span class="command"><strong>git</strong></span> wird für die
  Versionskontrolle verwendet und muss ggfs. nachinstalliert werden.</p><p>Bei Windows könnte es helfen, wenn <a class="ulink" href="http://www.cygwin.com" target="_top">cygwin</a> installiert ist
  (die Basis-Installation von cygwin zusammen mit
  <span class="command"><strong>git</strong></span> dürfte ausreichen). Die Umgebungsvariable
  <code class="envar">PATH</code> sollte um den bin-Pfad von cygwin ergänzt werden
  (üblicherweise <code class="filename">C:\cygwin\bin</code>), falls das nicht
  automatisch bei der cygwin-Installation gemacht wird. Zusätzlich
  wird für die Versionskontrolle <span class="command"><strong>git</strong></span> benötigt. Die
  Windows-Version von <span class="command"><strong>git</strong></span> kann man <a class="ulink" href="http://code.google.com/p/msysgit/" target="_top">hier</a>
  downloaden.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233720688"></a>1.3. git</h3></div></div></div><p>Ein git-Clone von BBBike ist notwendig, um die neuesten Daten
  sowie die aktuellsten Entwicklungstools zu erhalten. Eine Anleitung
  für das Durchführen eines git-Clone befindet sich unter <a class="ulink" href="README.html#ENTWICKLUNG" target="_top">Entwicklung im README</a>.
  Windows-Benutzer sollten das Verzeichnis mit dem git-Clone an die
  Stelle des originalen BBBike-Programmverzeichnisses verschieben,
  also üblicherweise
  <code class="filename">C:\Programme\BBBike\bbbike\</code>.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bbbikeadvanced"></a>2. BBBike starten</h2></div></div></div><p>BBBike sollte mit der Option <code class="option">-advanced</code>
  gestartet werden entweder in der Kommandozeile angeben oder in den
  Option unter "Advanced" den Knopf "advanced" anklicken. Nach dem
  Ändern der Option ist ein Neustart erforderlich. Mit der Option
  <code class="option">-advanced</code> erhält man u.a. neue Menüs, die bei der
  Datenerfassung helfen.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233715184"></a>3. Editiermodus</h2></div></div></div><p>Einschalten des EDIT-Modus durch Klick auf den
  <span class="guibutton">EDIT</span>-Button unten rechts. Die Layer werden
  neu geladen und es werden zusätzlich die Kreuzungs- und Kurvenpunkte
  angezeigt.</p><p>Alternativ kann der EDIT-Modus beim Starten von BBBike mit der
  Option <code class="option">-edit</code> eingeschaltet werden. Nützlich ist
  auch die Option <code class="option">-edittools</code>, womit einige
  Editierhilfen automatisch geöffnet werden.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233712016"></a>4. Straßen-Editor</h2></div></div></div><p>Mit Klick auf das Menü
  <span class="guimenu">Bearbeiten</span> &#8594; <span class="guimenuitem">Straßen-Editor</span>
  wird ein Fenster mit einigen Editieroption geöffnet.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="newstreets"></a>4.1. Neue Straßen hinzufügen</h3></div></div></div><p>Durch Klicken auf die Karte kann ein Straßenzug
  zusammengestellt werden. Für nicht bestehende Punkte muss man
  gleichzeitig die <span class="keycap"><strong>Shift</strong></span>-Taste gedrückt halten. Bei
  bereits bestehenden Punkten (also Kreuzungspunkten) darf die
  <span class="keycap"><strong>Shift</strong></span>-Taste nicht verwendet werden. Kreuzt eine
  neue Straße eine bestehende Straße, ohne dass bereits ein
  Kreuzungspunkt existiert, muss zuerst ein neuer Kurvenpunkt im
  bestehenden Straßenzug erzeugt werden (siehe <a class="link" href="#insertpoint" title="4.4. Punkt hinzufügen">Punkt einfügen</a>). Falls es sich bei der
  Kreuzung um eine Brücke handelt, darf kein gemeinsamer Punkt erzeugt
  werden. Stattdessen sollte ein informeller Eintrag in der Datei
  <code class="filename">brunnels</code> erzeugt werden.</p><p>Nachdem die neue Straße zusammengestellt wurde, muss sie per
  <span class="guibutton">Add new to:</span> zu einer Datei, normalerweise
  <code class="filename">strassen</code> (in Berlin),
  <code class="filename">landstrassen</code> (im näheren Umland von Berlin)
  oder <code class="filename">landstrassen2</code> (im entfernteren Umland von
  Berlin und außerhalb von Brandenburg) hinzugefügt werden. Im
  nachfolgenden Dialog wird der Straßenname und die Kategorie
  eingetragen, die Koordinaten des Straßenzugs sind bereits
  eingetragen.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="officialstreetnames"></a>4.1.1. Regeln bei Straßennamen</h4></div></div></div><p>In Berlin (<code class="filename">strassen</code>) werden nur
  "offizielle" Straßennamen verwendet. Offizielle Straßennamen sind in
  der Datei <code class="filename">Berlin.coords.data</code> aufgelistet.</p><p>Es kann aber durchaus sein, dass in dieser Datei Straßen
  fehlen. In diesem Fall muss die Straße mit Bezirks-/Ortsteilsname
  (nicht die neuen Superbezirksnamen verwenden!), Postleitzahl und
  einem exemplarischen Punkt eingetragen werden. "...straße" wird
  immer als "...str." abgekürzt. Straßen, die durch mehrere Ortsteile
  und/oder Postleitzahlgebiete führen, müssen dementsprechend viele
  Einträge erhalten.</p><p>Wenn eine Straße in mehreren Bezirken vorhanden ist, muß der
  Bezirk im Klammern dahinter stehen. Beispiele:

  </p><pre class="programlisting">
    Methfesselstr.
    Kurfürstenstr. (Schöneberg)
    Heerstr. (Spandau, Charlottenburg)</pre><p>

  </p><p>Wenn es sich innerhalb Berlins um eine "inoffizielle" Straße
  handelt, muss die Straße in Klammern gesetzt werden. Das können Wege
  in Parks sein oder namenslose Verbindungen. Beispiele:

  </p><pre class="programlisting">
    (Parkweg im Volkspark Friedrichshain)
    (zur Eisenbahnbrücke)</pre><p>

  </p><p>Bei Verbindungsbezeichnungen sollte ein Bindestrich verwendet
  werden und die beiden Punkte in der richtigen Reihenfolge (genau wie
  der Straßenzug erzeugt wurde) angegeben werden. Beispiel:

  </p><pre class="programlisting">
    (Bahndamm - Elsenstr.)</pre><p>

  </p><p>Ob die richtige Reihenfolge gewählt wurde, kann später beim
  Routing überprüft werden. Je nach Richtung sollte in der Routenliste

  </p><pre class="programlisting">
    (Elsenstr. -) Bahndamm
    (Bahndamm -) Elsenstr.</pre><p>

  erscheinen.</p><p>In den Landstraßendateien (<code class="filename">landstrassen</code>
  und <code class="filename">landstrassen2</code>) sollten die Straßennamen
  möglichst so gewählt werden, dass sie in der Realität bestehenden
  Wegweisern entsprechen. Ist das nicht bekannt, nimmt man die
  benachbarten Orte. Eine Straßennummerierung wird vorangestellt oder
  in Klammern angefügt. Zurzeit werden nur Bundesstraßen bei der
  Straßennummerierung verwendet. Beispiele:

  </p><pre class="programlisting">
    B1: Potsdam - Brandenburg
    Müncheberg - Prötzel (B168)
    Prenzlau - Penkun
            ^ ^ Hier muss immer ein Leerzeichen stehen!
    Strausberg-Nord - Altlandsberg
              ^ Bei zusammengesetzten Ortsnamen darf kein
                Leerzeichen stehen!</pre><p>

  </p><p>Nach dem Einfügen der Straße ist diese nicht sofort sichtbar,
  sondern die Straße muss mit <span class="guibutton">Reload</span> neu
  geladen werden. </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warnung</h3><p>Manchmal funktioniert
  <span class="guibutton">Reload</span> nicht, dann muss der Layer aus- und
  wieder eingeschaltet werden.</p></div><p> </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tipp</h3><p>Um das
  Laden zu beschleunigen kann im Menü
  <span class="guimenu">Bearbeiten</span> &#8594; <span class="guimenuitem">Lazy
  drawing</span> verwendet werden.</p></div><p>
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warnung</h3><p><span class="guimenuitem">Lazy drawing</span> führt zu
  einem Speicherleck, der zu einem stetigen Speicherzuwachs in BBBike
  führt.</p></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233688128"></a>4.2. Attribute zu einer Straße hinzufügen</h3></div></div></div><p>Nach dem Reload ist die neue Straße sichtbar. Man kann sich
  wieder den Straßenzug zusammenklicken (den ganzen Teil oder nur
  einen Teil davon) und diesen Straßenzug mit <span class="guibutton">Add to
  new</span> zu einer Attributdatei hinzufügen. Hier muss darauf
  geachtet werden, dass <span class="emphasis"><em>alle</em></span> Punkte auf
  bestehenden Kurvenpunkten liegen (<span class="keycap"><strong>Shift</strong></span>-Maustaste
  ist hier verboten) und dass kein Punkt vergessen oder doppelte
  angeklickt wurden.<a href="#ftn.idm46037233685648" class="footnote" name="idm46037233685648"><sup class="footnote">[1]</sup></a></p><p>Mögliche Attribute sind Fahrbahnqualität
  (<code class="filename">qualitaet_s</code> für Berliner,
  <code class="filename">qualitaet_l</code> für Nicht-Berliner Straßen),
  sonstige Beeinträchtigungen (<code class="filename">handicap_s</code> für
  Berliner, <code class="filename">handicap_l</code> für Nicht-Berliner
  Straßen), Radwege (<code class="filename">radwege</code> für Berlin,
  <code class="filename">comments_cyclepath</code> außerhalb Berlins) usw. Eine
  Liste der Attributierungsdateien befindet sich in <a class="ulink" href="bbd.html" target="_top">der Dokumentation zum bbd-Format</a>. Hier sind
  auch die verwendeten Kategorien beschrieben.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233678704"></a>4.3. Die orig-Dateien konvertieren</h3></div></div></div><p>Die im Edit-Modus bearbeiteten Dateien sind die Dateien im
  Verzeichnis <code class="filename">data</code> mit der Endung
  <code class="filename">-orig</code>. BBBike im Normalmodus verwendet die
  Dateien ohne die Endung <code class="filename">-orig</code>. Die
  Konvertierung wird vom <code class="filename">Makefile</code> im Verzeichnis
  <code class="filename">data</code> vorgenommen. Das
  <code class="filename">Makefile</code> funktioniert nur mit einem modernen
  BSD-make. Alle Nicht-BSD-Systeme (auch Linux) benötigen dieses make,
  dass bei <a class="ulink" href="http://sourceforge.net/project/showfiles.php?group_id=91459package_id=115420" target="_top">Sourceforge</a>
  als <span class="command"><strong>pmake</strong></span> im Quellcode erhältlich ist.
  Debian-Benutzer können das Kommando <span class="command"><strong>bmake</strong></span> (seit
  Debian/jessie) (alternativ, falls verfügbar,
  <span class="command"><strong>freebsd-make</strong></span> oder <span class="command"><strong>fmake</strong></span> oder
  <span class="command"><strong>pmake</strong></span>). Ein Windows-Binary existiert noch
  nicht.</p><p>Mit <span class="command"><strong>make</strong></span> im
  <code class="filename">data</code>-Verzeichnis wird eine Konvertierung
  vorgenommen und, wichtiger, eine Reihe von Konsistenzchecks
  durchgeführt. So müssen beispielsweise alle Straßen in
  <code class="filename">strassen</code> auch in
  <code class="filename">Berlin.coords.data</code> aufgeführt sein (siehe auch
  <a class="link" href="#officialstreetnames" title="4.1.1. Regeln bei Straßennamen">oben</a>),
  <code class="filename">Berlin.coords.data</code> muss sortiert sein, alle
  Ampeln müssen sich auf Kurvenpunkten existieren, alle Attributedaten
  müssen auf bestehenden Straßenzügen liegen usw.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="insertpoint"></a>4.4. Punkt hinzufügen</h3></div></div></div><p>Im Straßen-Editor gibt es zwei Möglichkeiten zum Einfügen
  eines Punktes in eine bestehende Seite.</p><p>Mit <span class="guibutton">Insert point</span> kann mit einem
  einfachen Mausklick auf eine Straße an dieser Stelle ein Punkt
  ausgewählt werden. Danach erscheint ein Dialog, wo man das Einfügen
  bestätigt, unter Umständen per Checkbox nur für bestimmte Layer.
  Nach dem Bestätigen kann per <span class="guibutton">Reload</span> der neue
  Punkt sichtbar gemacht werden. Achtung! Beim Bestätigen sollte man
  den angezeigten Straßennamen überprüfen. Stimmt dieser nicht
  überein, so muss das Hinzufügen des Punktes abgebrochen werden, und
  der Straßen-Layer aus- und wieder eingeschaltet werden (bekannter
  Bug in BBBike). <span class="guibutton">Insert point</span> ist ein Modus,
  der ein- und ausgeschaltet werden muss.</p><p>Mit <span class="guibutton">Insert multiple points</span> können
  mehrere Punkte zwischen zwei benachbarten Kurvenpunkten eingefügt
  werden. Dazu klickt man zuerst den ersten Kurvenpunkt an (ohne
  <span class="keycap"><strong>Shift</strong></span>), dann die einzufügenden Punkte (mit
  <span class="keycap"><strong>Shift</strong></span>) und schließlich den zweiten Kurvenpunkt an.
  Jetzt wählt man <span class="guibutton">Insert multiple points</span> aus.
  Ein Dialog erscheint, wo man das Einfügen bestätigen muss und kann
  dann auf Reload drücken. Der bei der ersten Methode erwähnte Bug
  tritt hier nicht auf.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233660928"></a>4.5. Punkt verschieben</h3></div></div></div><p>Mit <span class="guibutton">Move points</span> kann ein Punkt
  verschoben werden. Das wird man z.B. machen, wenn man anhand eines
  GPS-Tracks feststellt, dass eine Straße verschoben ist. Zum
  Verschieben klickt man zuerst den zu verschiebenden Punkt an (ohne
  <span class="keycap"><strong>Shift</strong></span>) und dann das Ziel (mit oder ohne
  <span class="keycap"><strong>Shift</strong></span>, je nachdem, ob das Ziel ein existierender
  Kurvenpunkt ist), und schließlich <span class="guibutton">Move
  points</span>. Der Dialog mit den betreffenden Layern wird
  angezeigt und kann bestätigt werden. Achtung: einige Punkte sollten
  nur bei genauer vorheriger Überprüfung verschoben werden. Dazu
  zählen Endpunkte (im Dialog mit "endpoint" markiert), Höhenpunkte,
  Ampeln u.ä.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233657424"></a>4.6. Linie verschieben</h3></div></div></div><p>Eine bestehende Linie zwischen zwei Punkten kann verschoben
  werden. Man benutzt diese Funktion anstelle von <span class="guibutton">Move
  point</span>, wenn einer der Punkte bereits für eine andere
  Straße an der richtigen Stelle steht. Arbeitsweise: die beiden
  benachbarten Punkte der zu verschiebenden Strecke mit Klick
  markieren (ohne <span class="keycap"><strong>Shift</strong></span>), wobei der zweite Punkt der
  zu verschiebende ist. Dann wird der Zielpunkt mit Klick ausgewählt
  (meistens mit <span class="keycap"><strong>Shift</strong></span>). <span class="guibutton">Move
  line</span> auswählen, Dialog bestätigen und evtl. ein Reload
  durchführen.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233654176"></a>4.7. Punkt suchen</h3></div></div></div><p>Mit <span class="guibutton">Grep point</span> kann nachgeschaut
  werden, in welchen Layern ein Punkt vorkommt. Die Vorgehensweise
  ist: Punkt per Klick markieren und dann auf <span class="guibutton">Grep
  point</span> klicken.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233651952"></a>4.8. Linie suchen</h3></div></div></div><p>Mit <span class="guibutton">Grep line</span> kann nachgeschaut werden,
  in welchen Layern eine Linie mit zwei benachbarten Punkten vorkommt.
  Die Vorgehensweise ist: zwei Punkte per Klick markieren und dann auf
  <span class="guibutton">Grep line</span> klicken.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233649712"></a>4.9. Punkt löschen</h3></div></div></div><p>Dieser Punkt muss noch mehr als "Einen Punkt bewegen" mit
  Vorsicht behandelt werden. Auch hier gilt, dass Höhenpunkte und
  Ampeln normalerweise nicht gelöscht werden sollen. Bei Strecken muss
  darauf geachtet werden, dass mindestens zwei Punkte in der Strecke
  übrig bleiben.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233648288"></a>4.10. Koordinatenliste anzeigen</h3></div></div></div><p>Eine Koordinatenliste (kann auch aus einem einzelnen Punkt
  bestehen) markieren und mit "Copy" im jeweiligen Programm auswählen
  (Unix-Benutzer müssen in der Regel nur markieren). In BBBike den
  Menüpunkt
  <span class="guimenu">Bearbeiten</span> &#8594; <span class="guimenuitem">Linienkoordinaten
  anzeigen</span> auswählen. Nach Klick auf dem
  Button wird der Kartenausschnitt verschoben und die Punkte der
  Koordinatenliste blinken auf. Mit der Option <span class="guimenuitem">Ständige
  Markierungen</span> bleibt die Markierung ständig bestehen,
  ansonsten verschwindet sie nach wenigen Sekunden.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233711760"></a>5. Veröffentlichen der Ergänzungen</h2></div></div></div><p>Bei der Verwendung des Straßen-Editors wird eine Logdatei in
  <code class="filename">data/datachange.log</code> geschrieben. Diese Datei
  sollte an den <a class="ulink" href="mailto:slaven@rezic.de" target="_top">Maintainer der
  BBBike-Stammdaten</a> geschickt werden. In der Datei ist auch
  jeweils ein Zeitstempel pro Tag enthalten; es reicht aus, wenn nur
  die neuesten Änderungen abgeschickt werden. Zugleich sollte ein diff
  geschickt werden. Dieses wird mit <strong class="userinput"><code>git diff -u data &gt;
  data.patch</code></strong> aus dem ausgecheckten BBBike-Verzeichnis heraus
  gemacht. Die diff-Datei namens <code class="filename">data.patch</code>
  sollte dann ebenfalls an den Maintainer geschickt werden.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233642016"></a>6. Nach dem Veröffentlichen</h2></div></div></div><p>Es ist empfehlenswert, das Verzeichnis
  <code class="filename">data</code> nach dem Veröffentlichen umzubenennen
  (oder zu löschen) und das alte Verzeichnis mit <strong class="userinput"><code>git checkout
  -- data</code></strong> wiederherzustellen. Der Grund sind mögliche
  Konflikte, die auftreten können, nachdem der Maintainer die
  editierten Daten in das Haupt-git-Repository eingepflegt hat.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233639488"></a>7. Erfassen anhand eines GPS-Tracks</h2></div></div></div><p>GPS-Tracks können entweder als zusätzlicher Straßen-Layer oder
  (bevorzugt für Tracks im <a class="ulink" href="http://www.ncc.up.pt/gpsman/" target="_top">gpsman</a>-Format) über
  den Menüpunkt
  <span class="guimenu">Kartenebenen</span> &#8594; <span class="guisubmenu">Zusätzliche
  Kartenebenen</span> &#8594; <span class="guimenuitem">Gpsman-Daten
  zeichnen</span> dargestellt werden. Im letzteren
  Fall sollten sich die GPS-Tracks im Verzeichnis
  <code class="filename">bbbike/misc/gps_data/</code> im Dateinamenformat
  <code class="filename">YYYYMMDD.trk</code> für Tracks und
  <code class="filename">YYYYMMDD.wpt</code> für Waypoints befinden.</p><p>Straßen müssen manuell eingetragen werden (siehe <a class="link" href="#newstreets" title="4.1. Neue Straßen hinzufügen">Neue Straßen hinzufügen</a>). Man darf
  GPS-Tracks nicht 100%ig trauen, da bei schlechten Sichtverhältnissen
  zu den Satelliten (Straßenschluchten, im Wald) oder Reflexionen von
  Hochhäusern verfälschte Punkte auftreten können.</p><p>Bei dargestellten Gpsman-Tracks wird die jeweilige
  Geschwindigkeit farblich kodiert (der Farbverlauf kann vor dem
  Zeichnen nach Belieben eingestellt werden). Das kann helfen, um z.B.
  schlechte Wegabschnitte nachträglich zu identifizieren. Genauer ist
  es meist, wenn man zusätzlich zum Track auch die zugehörigen
  Waypoints zeichnen lässt. Während der Radtouren setzt man dann an
  "interessanten" Stellen, z.B. bei Qualitätsänderungen (Asphalt -
  Kopfsteinpflaster) einen Waypoint.</p><p>Steigungen können nur bei GPS-Geräten mit barometrischen
  Höhenmesser einigermaßen zuverlässig bestimmt werden. Obwohl
  GPS-Geräte absolute Höhenangaben erzeugen, sollten diese nicht
  verwendet werden, weil dazu die Geräte höhenkalibriert sein müssen.
  Stattdessen kann man die relative Höhenänderung in eine
  Prozentangabe übersetzen und in die Datei
  <code class="filename">comments_mount</code> eintragen.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233631200"></a>8. Ein Exkurs über die verwendeten Layer und Attribute</h2></div></div></div><p>Grundsätzlich ist die Lektüre der <a class="ulink" href="bbd.html" target="_top">Dokumentation des bbd-Formats</a> (leider
  nur englisch) empfehlenswert.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233628736"></a>8.1. Plätze</h3></div></div></div><p>Plätze, die einen eigenständigen Straßenzug beschreiben,
  sollten in <code class="filename">strassen</code> eingetragen werden. Plätze,
  die nur mit einem Punkt beschrieben werden, sollten in
  <code class="filename">plaetze</code> eingetragen werden. Plätze, die sich
  auf einem bestehenden Straßenzug befinden, sollten ebenso nach
  <code class="filename">plaetze</code>. Wenn ein Platz in
  <code class="filename">plaetze</code> eingetragen wurde, dann müssen sich
  alle Punkte des Platzes auf einer bestehenden Straße befinden.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233625328"></a>8.2. Qualität</h3></div></div></div><p>Fahrbahnbeschaffenheit wie Asphalt, Kopfsteinpflaster, Waldweg
  usw. Kombinationen sind im Beschreibungsteil möglich, z.B.
  "schlechtes Kopfsteinpflaster mit Sandbanketten" oder "schlechte
  sandige Straße, Ausweichen auf Gehweg möglich". In der Regel sollte
  man die schlechtere Kategorie für solchen Fälle wählen.</p><p>Dateinamen: <code class="filename">qualitaet_s</code> und
  <code class="filename">qualitaet_l</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="handicaptemporary"></a>8.3. sonstige Beeinträchtigungen</h3></div></div></div><p>Manchmal auch als "sonstige Behinderungen" oder "handicap"
  bezeichnet. Hier kommt alles herein, was, salopp gesprochen, nicht
  rüttelt, aber dennoch zu einer langsameren Fahrweise zwingt.
  Beispiele wären Fußgängerzonen, Parkwege mit vielen Fußgängern, enge
  und kurvenreiche Wege, aber auch Wege mit Bordsteinen (letzteres
  könnte in Zukunft anders gelöst werden). Notorisch zugestaute
  Straßen (z.B. die Friedrichstraße in Berlin-Mitte) könnten
  theoretisch hier auch aufgeführt werden.</p><p>Temporäre Beeinträchtigungen werden mit einer
  <code class="constant">temporary</code>-Direktive versehen und können noch
  den Zusatz <code class="constant">::inwork</code> erhalten (Beispiel
  <code class="constant">q4::inwork</code>). Der Beschreibungstext sollte zudem
  das Datum der Aufhebung im Format YYYY-MM-DD enthalten, so dass das
  Postprocessing rechtzeitig das Ablaufen anzeigen kann.</p><p>Dateinamen: <code class="filename">handicap_s</code> und
  <code class="filename">handicap_l</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233617552"></a>8.4. Radwege</h3></div></div></div><p>In Berlin wird versucht, genau zu kategorisieren, siehe auch
  <a class="ulink" href="bbd.html#CYCLE_PATHS_RADWEGE_" target="_top">die entsprechende
  Dokumentation in der <code class="filename">bbd</code>-Dokumentation</a>.
  Ob ein Radweg benutzungspflichtig ist, ändert sich in Berlin häufig
  und man merkt sich dieses Merkmal beim Vorbeifahren schlecht, so
  dass eine Fehlkategorisierung mit <code class="constant">RW1</code> statt
  <code class="constant">RW2</code> verziehen wird. Der Unterschied zwischen
  Suggestivstreifen und Radspur ist nicht immer klar ersichtlich. Bei
  Busspuren gibt es noch keine Kategorisierung nach den
  Geltungszeiten, diese könnte im Beschreibungsfeld stehen (das ist in
  den bisherigen Daten noch nicht der Fall).</p><p>In der Berliner Umgebung wird nur mit <code class="constant">RW</code>
  kategorisiert und möglichst immer das Beschreibungsfeld gefüllt.</p><p>Die Qualität des Radwegs kann nur im Beschreibungsfeld als
  beschreibender Text eingetragen werden.</p><p>Dateinamen: <code class="filename">radwege</code> und
  <code class="filename">comments_cyclepath</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233611072"></a>8.5. Grüne Wege</h3></div></div></div><p>Wege, die durch Parks und Wälder oder an Gewässern entlang
  führen. Es gibt zwei Stufen, <code class="constant">green1</code> und
  <code class="constant">green2</code>. <code class="constant">green1</code> wird
  vergeben, wenn sich der Weg im überwiegend städtischen Gebiet
  befindet (z.B. Uferstraßen) oder es sich um eine größere Straße in
  einem Park handelt (z.B. John-Foster-Dulles-Allee). Die
  Kanaluferstraßen am Landwehrkanal würden eigentlich
  <code class="constant">green1</code>-konform sein, aber die Straßen sind dort
  so sehr befahren, dass sie keine "green"-Kategorisierung erhalten
  haben.</p><p>Im Beschreibungsfeld steht meistens der Typ wie "Uferstraße"
  oder "Parkweg durch den Tiergarten".</p><p>In Vorbereitung ist die Datei
  <code class="filename">comments_scenic</code> wo landschaftlich besonders
  schöne Strecken im Umland oder sonstige schöne Straßen in der Stadt
  beschrieben werden können.</p><p>Dateiname: <code class="filename">green</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233605472"></a>8.6. Unbeleuchtete Straßen</h3></div></div></div><p>Hier werden nachts unbeleuchtete Straßen eingetragen. Bei
  Grenzfällen, z.B. Ausschalten der Beleuchtung zu einer bestimmten
  Uhrzeit, kann diese im Beschreibungsfeld aufgeführt werden.</p><p>Dateiname: <code class="filename">nolighting</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233603600"></a>8.7. Ampeln</h3></div></div></div><p>Neben Ampeln (hochdeutsch: LSA) kann man auch Bahnübergänge
  und Zugbrücken unterbringen. Bei Bahnübergängen (Kategorie
  <code class="constant">B</code>) kann man im Beschreibungsfeld die ungefähre
  Anzahl von Zügen pro Stunde angeben.</p><p>Bei Zugbrücken (Kategorie <code class="constant">Zbr</code>) können im
  Beschreibungsfeld die Sperrzeiten angegeben werden, falls welche
  existieren (z.B. gesehen bei der B110 zwischen Anklam und
  Usedom).</p><p>Bei Ampeln wird zwischen normalen Ampeln (Kategorie
  <code class="constant">X</code>, Achtung: kann sich in Zukunft ändern) und
  reinen Fußgängerampeln (Kategorie <code class="constant">F</code>)
  unterschieden. Ampeln sind nur in Berlin und Oranienburg
  erfasst.</p><p>Mehrfachampeln werden meistens nur einfach erfasst, aber
  theoretisch könnte man das Beschreibungsfeld mit einer Erklärung
  ergänzen.</p><p>Dateiname: <code class="filename">ampeln</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233597856"></a>8.8. Steigungen</h3></div></div></div><p>Drei Möglichkeiten gibt es zur Erfassung von Steigungen:

  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Angabe von Höhenpunkten. In diesem Fall wird ein
    Eintrag in der Datei <code class="filename">mount</code> automatisch vom
    Postprocessing erzeugt.</p></li><li class="listitem"><p>Angabe einer informellen Steigung ohne
    Prozentangabe. Dies geschieht in der Datei
    <code class="filename">comments_mount</code>. Mann lann Attribute wie
    "steil", "stark", "flach", "lang", "wellig", "kurz" im
    Beschreibungsfeld unterbringen.</p></li><li class="listitem"><p>Angabe der Steigung in Prozent. Quelle für die
    Prozentzahl könnte ein Steigungsschild an der Straße oder relative
    Höhenangaben eines barometrischen Höhenmessers sein. In diesem
    Fall muss im Beschreibungsfeld "Steigung n%"
    stehen.</p></li></ul></div><p>

  </p><p>Gefälle werden niemals angegeben, sondern ergeben sich
  implizit aus der Steigung.</p><p>Dateinamen: <code class="filename">hoehe</code>,
  <code class="filename">comments_mount</code>,
  <code class="filename">mount</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233590704"></a>8.9. Straßenbahnen</h3></div></div></div><p>Wenn zwischen Straßenbahngleisen und parkenden Autos oder
  Bordsteinkante wenig Platz ist, sollte ein Eintrag in dieser Datei
  geschaffen werden. Faustregel wäre: ein Fahrrad mit Anhänger sollte
  gebührenden Abstand zu parkendes Autos halten können und sicher von
  einer Straßenbahn überholt werden. Nur in Berlin erfasst.</p><p>Dateiname: <code class="filename">comments_tram</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233588592"></a>8.10. Ausgeschilderte Radrouten</h3></div></div></div><p>Beispiele für ausgeschilderte Radrouten sind der europäische
  Radfernweg R1, die neuen Radialrouten in Berlin (z.B. RR10),
  Berlin-Usedom, Mauerradweg. Oft sind Abschnitte zwar als Radroute
  angedacht, aber (noch) nicht ausgeschildert. Es wäre gut, wenn diese
  Abschnitte entsprechend markiert werden. Manche Nummerierungen
  werden doppelt vergeben, so gibt es eine R1 auch in der Bernauer
  Umgebung. In diesem Fall wird der "unbedeutendere" Weg genauer
  gekennzeichnet. Für einige wichtige Radrouten gibt es vorreservierte
  Buchstabenkürzel, z.B. "BU" für Berlin-Usedom. Diese sind in der
  Programmdatei <code class="filename">Geography/Berlin_DE.pm</code> fest
  verdrahtet.</p><p>Dateiname: <code class="filename">comments_route</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233585488"></a>8.11. Kommentare für Streckenführungen</h3></div></div></div><p>Manchmal sind Streckenführungen in der Realität nicht einfach
  zu finden. Dazu werden in dieser Datei erleichternde Erklärungen
  geschrieben. Beispiele wären "Ausgeschildert als ..." oder "An der
  Kreuzung .../... die Straßenseite wechseln" oder "Am einsamen Haus
  links abbiegen". Es gibt Punktkommentare (für einen Punkt immer
  gültig, egal in welche Richtung man fährt) und Streckenkommentare
  (gültig, falls man den kompletten Streckenteil fährt; wahlweise auch
  in der Form, die nur für eine Richtung gültig ist).</p><p>Dateiname: <code class="filename">comments_path</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233583040"></a>8.12. Kommentare zu Fährverbindungen</h3></div></div></div><p>Fährzeiten und Preise der Fähren, möglichst mit dem Stand der
  letzten Aktualisierung.</p><p>Dateiname: <code class="filename">comments_ferry</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233581264"></a>8.13. Sonstige Kommentare</h3></div></div></div><p>Alle Kommentare, die nicht in eine der anderen Dateien passen,
  kommen hier herein.</p><p>Dateiname: <code class="filename">comments_misc</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233579248"></a>8.14. Gesperrte Straßen</h3></div></div></div><p>Darunter fallen folgende Typen:

  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Einbahnstraßen, die auch für Radfahrer gelten
    (Kategorie <code class="constant">1</code></p></li><li class="listitem"><p>Einbahnstraßen, die in der Praxis von Radfahrern
    ignoriert werden können <code class="constant">1s</code></p></li><li class="listitem"><p>Für Radfahrer vollkommen gesperrte Straßen (z.B.
    Kfz-Straßen wie die B96a in Altglienicke, aber siehe auch <a class="link" href="#strassenbab">hier</a>; Kategorie
    <code class="constant">2</code>)</p></li><li class="listitem"><p>Stellen, an denen getragen werden muss (Kategorie
    <code class="constant">0:n</code>, wobei <code class="constant">n</code> für die
    Zeit in Sekunden steht, die dabei verloren geht - hier wähle ich
    großzügige Zeiten, meistens nicht unter 30 Sekunden. Zeiten über
    einer Minute werden ebenfalls in Sekunden angegeben z.B.
    <code class="constant">0:60</code>)</p></li><li class="listitem"><p>Drängelgitter und Ähnliches (Kategorie
    <code class="constant">BNP:n</code>, auch hier steht <code class="constant">n</code>
    für die verlorene Zeit)</p></li><li class="listitem"><p>Eine gesperrte Wegführung (z.B. nicht mögliches
    Abbiegen oder Überqueren einer Straße) (Kategorie
    <code class="constant">3</code>). Wenn beispielsweise nur rechts abbiegen
    erlaubt ist, müssen alle anderen Wegführungen (z.B. geradeaus und
    links) als gesperrt markiert werden, und das sowohl für Hin- und
    Rückrichtung. Wenn eine Abbiegebeschränkung durch eine
    Einbahnstraße verursacht wird, dann ist eine weitere Markierung in
    diesem Fall nicht notwendig.</p><p> Die gesperrte Wegführung
    wird typischerweise mit drei Punkten gekennzeichnet, wobei der
    mittlere Punkt der Punkt mit der Einschränkung ist.</p></li><li class="listitem"><p>Die Spezialkategorie
    <code class="constant">3nocross</code>, mit der ein Straßenzug, der nicht
    überquert werden kann (z.B. wegen einer Straßenbahntrasse, wegen
    eines nicht passierbaren Mittelstreifens oder wegen sehr (!)
    starken Kfz-Verkehrs), gekennzeichnet wird. Im Postprocessing
    werden die <code class="constant">3nocross</code>-Kategorien in mehrere
    Strecken mit der Kategorie <code class="constant">3</code>
    umgewandelt.</p><p> Beispiele findet man in den BBBike-Daten
    im Raum Prenzlauer Berg. In BBBike werden die
    <code class="constant">3nocross</code>-Strecken mit gestrichelten orangen
    Linien markiert und sind nur im Editiermodus sichtbar.
    </p></li></ul></div><p>Gesperrte Straßen für Autofahrer können in der Datei
  <code class="filename">gesperrt_car</code> eingetragen werden.</p><p>Temporär gesperrte Strecken sollten mit einer Direktive
  <code class="constant">temporary</code> versehen werden und unter Umständen
  in der Kategorie den Zusatz <code class="constant">:inwork</code> (Achtung:
  hier nur ein Doppelpunkt, aber das kann sich ändern!) erhalten
  (siehe auch die <a class="link" href="#handicaptemporary" title="8.3. sonstige Beeinträchtigungen">Ausführung zu
  temporären Einträgen in handicap</a>).</p><p>Dateinamen: <code class="filename">gesperrt</code>, <code class="filename">gesperrt_car</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233560928"></a>8.15. Brunnels</h3></div></div></div><p>Brunnels ist die Zusammenfassung von Brücken und Tunnels. In
  Zukunft werden auf BBBike-gezeichneten Karten brunnels auch als
  solche gemalt. Zurzeit können die brunnels-Daten verwendet werden,
  um bei der Erkennung von nicht eingetragenen Kreuzungen beizutragen
  (Programm <code class="filename">miscsrc/check_crossings</code>).</p><p>Dateiname: <code class="filename">brunnels</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233558208"></a>8.16. Vorfahrtstraßen</h3></div></div></div><p>Diese Datensätze bestehen aus Koordinaten für einen
  Straßenzug, der Vorfahrt am mittleren Punkt besitzt. Dieser Layer
  kann in BBBike gezeichnet werden, wird aber (noch) nicht weiter
  verwendet. Deshalb können Einträge in diesem Layer auch weggelassen
  werden. Geplant ist es, diese Information in BBBike bei der
  Routensuche zu verwenden (zusätzliche Penalties) oder zusätzlich
  Hinweise in der Routenliste anzuzeigen, zum Beispiel bei
  abknickenden Vorfahrtsstraßen.</p><p>Es gibt implizite Regeln für die Vorfahrt. Wenn eine dieser
  Regeln erfüllt ist, braucht man keinen Datensatz für die Vorfahrt
  anlegen:

  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Bei Ampeln braucht man keine Vorfahrtsregelung zu
    markieren.</p></li><li class="listitem"><p>Höhergeordnete Straßen haben Vorfahrt
    vor niedrigeren Straßen, also H hat Vorfahrt vor N und HH vor H
    etc.</p></li><li class="listitem"><p>Spielstraßen (verkehrsberuhigte Straßen)
    haben nie Vorfahrt vor Nicht-Spielstraßen.</p></li><li class="listitem"><p>Alle anderen Kreuzungen werden als
    Rechts-vor-Links-Kreuzungen angenommen.</p></li></ul></div><p>

  </p><p>Dateiname: <code class="filename">vorfahrt</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233552144"></a>8.17. Autobahnen</h3></div></div></div><p>Autobahnen und Kraftfahrzeugstraßen können zu
  Informationszwecken in diesem Layer aufgeführt werden. Strikt
  gesehen müssen die Strecken nicht so gezeichnet sein, dass sie
  routingfähig sind.</p><p>Dateiname: <code class="filename">strassen_bab</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233549520"></a>8.18. Sehenswürdigkeiten und wichtige Gebäude</h3></div></div></div><p>Die Datensätze in dieser Datei bekommen die Kategorie
  <code class="constant">SW</code>, oft mit vielen anderen Zusätzen. Falls es
  sich nur um einen Punkt handelt, ist es einfach nur
  <code class="constant">SW</code>, ansonsten <code class="constant">F:SW</code>.</p><p>Wenn zu der Sehenswürdigkeit ein Bild existiert, dann sollte
  das Bild in das Unterverzeichnis
  <code class="filename">sehenswuerdigkeit_img</code> abgelegt werden. Als
  Dateiformat sollte man möglichst ein von Perl/Tk nativ unterstütztes
  wie xpm oder gif wählen (neuere Perl/Tk-Versionen können auch jpg
  und png verarbeiten, aber darauf möchte ich mich erst einmal nicht
  verlassen). Die Bilder sollten relativ klein sein, höchstens 50
  Pixel in Breite und Höhe, und aus Grautönen bestehen und einen
  Alpha- bzw. Transparenzkanal besitzen. Das Bild wird per
  <code class="constant">IMG</code>-Kategorie gekennzeichnet (Beispiel siehe
  unten).</p><p>Es gibt einige vordefinierten Bilder wie
  <code class="filename">church.gif</code> (für Kirchen),
  <code class="filename">monument.gif</code> (für Denkmäler),
  <code class="filename">airport.gif</code> (für Flughäfen),
  <code class="filename">hospital.gif</code> (für Krankenhäuser) und
  <code class="filename">touristinfo.gif</code> (für Touristenbüros).</p><p>Falls man eine flächige Sehenswürdigkeit ohne Symbolbild, also
  weder Stern noch ein anderes Bild, darstellen möchte, kann man das
  vordefinierte leere Bild <code class="filename">px_1t.gif</code> verwenden.</p><p>Beispiele:

  </p><pre class="programlisting">
    IMG:sehenswuerdigkeit_img/brandenburger_tor.gif|ANCHOR:s
    (ein Bild, wobei sich die definierte Koordinate südlich vom Bild
    befindet: ANCHOR:s wie south)

    F:SW|IMG:church.gif
    (eine Kirche, wobei gleichzeitig eine Kirchensignatur sowie eine
    rote Fläche angezeigt wird)

    F:SW
    (eine allgemeine flächige Sehenswürdigkeit, hier wird ein
    Stern als Signatur angezeigt)

    F:SW|IMG:px_1t.gif
    (eine allgemeine flächige Sehenswürdigkeit, hier wird nur die rote
    Fläche gezeichnet und kein weiteres Symbol)

    IMG:sehenswuerdigkeit_img/reichstag.gif
    (ein Bild ohne Fläche und ohne Anchor-Information, hier wird
    einfach nur zentriert)</pre><p>

  In Zukunft werden die Standardbilder (church.gif) durch Kategorien
  ersetzt werden.</p><p>Dateiname: <code class="filename">sehenswuerdigkeit</code></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233538544"></a>8.19. Fragezeichen</h3></div></div></div><p>Bei der Erfassung der Kartendaten kommt es häufiger vor, dass
  ein bestimmter Aspekt (z.B. die Strassenqualität oder eine
  Abbiegesituation) unklar bleibt. Der Autor kann dies kommentieren,
  indem er alle Strecken und Punkte einträgt, bei denen er sich nicht
  sicher ist. Bei den Einträgen gibt es zwei Arten: öffentliche und
  nicht-öffentliche. Öffentliche Fragezeichen-Datensätze sind wie
  folgt sichtbar:

  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Sie werden Benutzern des Web-Interfaces von BBBike
    in der Routenliste präsentiert, wenn sie die Option "Unbekannte
    Strecke mit einbeziehen" auswählen.</p></li><li class="listitem"><p>Benutzer der MapServer-Interfaces und des
    Perl/Tk-Interfaces sehen diese Daten, wenn sie den
    Fragezeichen-Layer
    einschalten.</p></li></ul></div><p>Nicht-öffentliche Datensätze sind z.B. im Edit-Modus sichtbar
  oder beim Blick in die Datenquellen.</p><p>Einträge für die erzeugte Datei
  <code class="filename">fragezeichen</code> werden aus verschiedenen Quellen
  zusammengetragen: aus der Originaldatei
  <code class="filename">fragezeichen-orig</code> (aber auch nicht alle!) sowie
  aus mit <code class="constant">add_fragezeichen</code>-Direktiven versehenen
  Datensätzen. Die Regeln sehen wie folgt aus:

  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Alle Einträge in
    <code class="filename">fragezeichen-orig</code>, die in Sections

    </p><pre class="programlisting">        #: ignore vvv
        ...
        #: ignore ^^^</pre><p>

    stehen, werden nicht in die öffentliche
    <code class="filename">fragezeichen</code>-Datei übernommen. </p></li><li class="listitem"><p>Die Direktive
    </p><pre class="programlisting">
        #: add_fragezeichen: ...</pre><p>
    in einer beliebigen Datendatei (<code class="filename">*-orig</code>)
    übernimmt den nachfolgenden Eintrag in die
    <code class="filename">fragezeichen</code>-Datei. Diese sind aber im
    Edit-Modus nicht sichtbar, da sie nicht auch in die Datei
    <code class="filename">fragezeichen-orig</code> übernommen werden.</p></li><li class="listitem"><p>Die Direktive
    </p><pre class="programlisting">
        #: XXX: ...</pre><p>
    ist ein nicht-öffentlicher Kommentar, der aber nirgends
    visualisiert wird (das wird sich in Zukunft ändern!)</p></li><li class="listitem"><p>Alle Einträge in
    <code class="filename">fragezeichen-orig</code>, die die Direktive
    </p><pre class="programlisting">
        #: XXX ...</pre><p>
    haben, besitzen demnach zwei Kommentare: einen öffentlichen (den
    Namen im Datensatz) und den nicht-öffentlichen (der Text hinter
    der <code class="constant">XXX</code>-Direktive).</p></li></ul></div><p>Da alle Fragezeicheneinträge in der Datei
  <code class="filename">fragezeichen</code> im Webinterface angezeigt werden
  können, sollte der Text allgemein verständlich sein. Insbesondere
  geht die Information darüber verloren, in welcher Datei sich eine
  <code class="constant">add_fragezeichen</code>-Direktive befand (befindet sie
  sich z.B. in <code class="filename">qualitaet_s-orig</code>, dann sollte im
  Text auch klar werden, dass es sich um eine Frage nach der Qualität
  handelt). Auch geht ein Teil des geographische Kontexts verloren: in
  der Routenbeschreibung wird nicht ersichtlich, um welche Teilstrecke
  es geht. In diesem Fall sollten die von-nach-Kreuzungen möglichst
  mit angegeben werden.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233521856"></a>8.20. Temporäre Sperrungen</h3></div></div></div><p>Für Baustellen und Veranstaltungen, die Sperrungen oder
  Beeinträchtigungen zur Folge haben und nur kurz- oder mittelfristig
  (typischerweise höchstens ein Jahr) dauern, können Einträge in der
  Datei <code class="filename">temp_blockings/bbbike-temp-blockings.pl</code>
  vorgenommen werden. Entweder manuell, oder (empfohlen) über das
  Interface für "Temporäre Sperrungen".</p><p>Die Vorgehensweise sieht so aus:

  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Es ist nicht unbedingt notwendig, in den
    EDIT-Modus zu wechseln.</p></li><li class="listitem"><p>Den Menüpunkt
    <span class="guimenu">Sucheinstellungen</span> &#8594; <span class="guimenuitem">Benutzerdefinierte
    Sperrungen</span> &#8594; <span class="guimenuitem">Definieren</span>
    aktivieren.</p></li><li class="listitem"><p>Die Straßenabschnitte, in denen Sperrungen
    vorkommen, mit einem Mausklick markieren. Es können nur ganze
    Straßenabschnitte von Kreuzung zu Kreuzung (oder Kurvenpunkt)
    markiert werden. Mit einem nochmaligen Klick auf das Sperr-Symbol
    wird dieses wieder entfernt.</p></li><li class="listitem"><p>Den Menüpunkt
    <span class="guimenu">Sucheinstellungen</span> &#8594; <span class="guimenuitem">Benutzerdefinierte
    Sperrungen</span> &#8594; <span class="guimenuitem">Speichern für
    temp_blockings</span> auswählen. Ein
    Dialogfenster erscheint.</p></li><li class="listitem"><p>Eine natürlich-sprachliche Beschreibung für die
    Sperrung eintragen (z.B. betroffene Straßenzüge, Grund der
    Sperrung, Anfangs- und Enddatum der Sperrung
    etc.).</p></li><li class="listitem"><p>Nach Klick auf den "Date"-Knopf versucht das
    Programm, Anfangs- und Enddatum aus der Beschreibung zu
    extrahieren und in die Felder "Start" und "Ende" einzutragen. Es
    werden einige Datumsschreibweisen erkannt, wie "Tag.Monat.Jahr"
    oder "Ende Monat Jahr". Funktioniert das nicht, müssen Anfangs-
    und Enddatum manuell eingetragen werden oder auf "undef"
    (undefiniert, offener Anfang und offenes Ende) gesetzt
    werden.</p></li><li class="listitem"><p>Bei der Vorwarnzeit kann typischerweise die
    Voreinstellung von einem Tag beibehalten werden.</p></li><li class="listitem"><p>Typ der Sperrung/Beeinträchtigung wählen. Wenn die
    Straße tatsächlich komplett gesperrt ist (z.B. wenn eine neue
    Brücke eingesetzt wird oder es sich um ein überlaufenes
    Straßenfest handelt), dann sollte "gesperrt" gewählt werden. Wenn
    die Sperrung nur eine Richtung betrifft, dann sollte
    "Einbahnstraße" gewählt werden. Die manuelle Korrektur der
    Richtung wird später erläutert. Falls es sich um eine
    Beeinträchtigung handelt, die man als Radfahrer mit
    Schrittgeschwindigkeit passieren kann, wird "handicap"
    gewählt.</p></li><li class="listitem"><p>Falls auch das Überqueren der betroffenen Straßen
    nicht möglich ist (Beispiel: Berlin-Marathon), dann sollte der
    entsprechende Checkbutton ausgewählt werden.</p></li><li class="listitem"><p>Falls es sich nicht um eine Baustelle handelt,
    sollte der entsprechende Checkbutton deselektiert
    werden.</p></li><li class="listitem"><p>Die restlichen Einstellungen können meistens
    ignoriert werden. Man kann nun auf "Ok" klicken.</p></li><li class="listitem"><p>Der Dialog wird geschlossen und auch die
    Markierungen sollten verschwinden. Wenn man jetzt auf
    <span class="guimenu">Sucheinstellungen</span> &#8594; <span class="guimenuitem">Benutzerdefinierte
    Sperrungen</span> &#8594; <span class="guimenuitem">Aktive und zukünftige
    Sperrungen zeichnen</span> klickt, sollten die
    neuen Eintragungen wieder erscheinen, diesmal mit Baustellen- oder
    Kalendarsymbol.</p></li></ul></div><p>Wenn manuell Änderungen (z.B. Einbahnstraßen umdrehen)
  notwendig sind, muss das in der Datei
  <code class="filename">data/temp_blockings/bbbike-temp-blockings.pl</code>
  passieren. Bei der Datei handelt es sich um eine Perl-Datenstruktur,
  in der kleine bbd-Schnipsel vorkommen. Der zuletzt editierte Eintrag
  befindet sich typischerweise ganz hinten. Hier können die bbd-Daten,
  wie im Abschnitt <a class="link" href="#directedit">Direktes
  Editieren</a> beschrieben, geändert werden.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233504464"></a>8.21. Sackgassen (culdesac)</h3></div></div></div><p>In der Datei <code class="filename">culdesac</code> werden
  Sackgassenenden eingetragen. Es gibt zwei Kategorien:
  <code class="constant">culdesac</code> für echte Sackgassen für alle
  Verkehrsteilnehmer und <code class="constant">culdesac_pseudo</code> für
  Sackgassen nur für Kfz. Als Namen wählt man typischerweise
  "Sackgassenende", aber man kann auch davon abweichen (siehe
  unten).</p><p>Weiterhin gibt es typischerweise zwei Abschnitte in der
  <code class="filename">culdesac-orig</code>-Datei: Sackgassen, die nicht
  ignoriert werden und somit in die Zieldatei
  <code class="filename">culdesac</code> übernommen werden, sowie Sackgassen,
  die sich innerhalb eines <code class="constant">ignore</code>-Abschnitts
  befinden und nicht übernommen werden.</p><p>Sackgassen, die übernommen werden, werden zurzeit im
  CGI-Programm auf der Kreuzungsseite ("Genaue Kreuzung angeben")
  verwendet. Hier wird der Name, typischerweise "Sackgassenende",
  anbgezeigt. Falls sich aber eine bekannte Institution an diesem
  Punkt befindet, kann man den Namen der Institution zusätzlich oder
  ausschließlich eintragen (siehe z.B. "S-Bhf. Ostkreuz" an der
  Sonntagstraße).</p><p>Da Sackgasseneinträge Vorrang über Kreuzungsnamen haben, kann
  man "schlechte" Kreuzungsnamen damit überschreiben. Z.B. ist
  "Blücherplatz/Sackgassenende" wesentlich kürzer und prägnanter als
  das automatisch erzeugte "Blücherplatz/(Blücherplatz -
  Johanniterstr.)/(Blücherplatz - Zossener Str.)".</p><p>Ein weiterer Plan war, mithilfe der Sackgassendatei fehlende
  Straßen/Wege automatisch zu ermitteln: eine Straße muss entweder
  eine Fortsetzung haben oder als Sackgasse deklariert sein. Dieser
  automatische Check fehlt allerdings noch.</p><p>Dateiname: <code class="filename">culdesac</code></p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233630944"></a>9. Alternative Editiermöglichkeiten</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="fastedit"></a>9.1. Schnelles Erfassen von Daten</h3></div></div></div><p>Es ist auch möglich, mit der Standardinstallation von BBBike
  (ohne git) Daten zu erfassen, die an der Daten-Maintainer geschickt
  werden können. Dazu muss einfach ein Straßenzug zusammengeklickt
  werden, indem man die Shift-Maustaste verwendet. Existierende Punkte
  (nur im Edit-Modus) sollten nur mit der Maustaste (ohne Shift)
  zusammengeklickt werden. Nach Auswählen des Menüpunktes
  <span class="guimenu">Bearbeiten</span> &#8594; <span class="guimenuitem">Path to
  Selection</span> (dazu muss die <a class="link" href="#bbbikeadvanced" title="2. BBBike starten">Option Advanced</a> aktiviert sein)
  steht die Koordinatenliste als Selection zur Verfügung und kann mit
  "Paste" in einen Editor oder ein Mailprogramm eingefügt werden. Es
  ist für den Maintainer hilfreich, wenn dabei das normale
  BBBike-Datenformat verwendet wird, also
  </p><pre class="programlisting">
    Beschreibung (z.B. Straßenname) TAB Kategorie oder X Space Koordinatenliste</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233492192"></a>9.2. Direktes Editieren der Daten</h3></div></div></div><p>BBBike-Daten sind reine Textdateien und können mit einem
  normalen Texteditor bearbeitet werden. Dabei sollte der Texteditor
  im Zeichensatz <span class="emphasis"><em>iso-8859-1</em></span> eingestellt sein. Der
  Zeichensatz <span class="emphasis"><em>Windows-1252</em></span> ist erlaubt, soweit
  nicht einige Zeichen im Bereich 128-160 verwendet werden (z.B. die
  typografischen doppelten Anführungszeichen, das Euro-Zeichen).
  Ausnahmen sind einige Dateien, die den Zeichensatz
  <span class="emphasis"><em>utf-8</em></span> verwenden (z.B.
  <code class="filename">orte-orig</code>, <code class="filename">orte2-orig</code>).
  Der Zeichensatz ist, soweit er von <span class="emphasis"><em>iso-8859-1</em></span>
  abweicht, am Anfang der Datei mit einer entsprechenden
  <span class="emphasis"><em>encoding</em></span>-Direktive gekennzeichnet. Das
  Umschalten des Zeichensatzes sollte beim <code class="filename">emacs</code>
  automatisch erfolgen.</p><p>Beim Editieren mit einem Texteditor wird allerdings kein
  <code class="filename">datachange.log</code> erzeugt und das Zusammenführen
  mit den Stammdaten könnte in Handarbeit resultieren. Deshalb sollte
  möglichst immer der Straßen-Editor verwendet werden. Für die
  genauere Beschreibung des BBBike-Datenformats siehe <a class="ulink" href="bbd.html" target="_top">hier</a>.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233484864"></a>10. Neue Layer auf Basis der Berliner BBBike-Daten</h2></div></div></div><p>TBD</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm46037233483840"></a>11. Eine komplett neue Datenbank aufbauen</h2></div></div></div><p>Dazu sollte ein neues Datenverzeichnis parallel zu
  <code class="filename">data</code>-Verzeichnis erzeugt werden. Das
  Verzeichnis sollte alle Dateien aus <code class="filename">data</code>
  enthalten (Unterverzeichnisse können erst einmal ignoriert werden),
  aber alle Dateien sollten leer (d.h. 0 Bytes größ) sein (Ausnahmen:
  <code class="filename">Makefile</code>,
  <code class="filename">Makefile.mapfiles</code>,
  <code class="filename">README</code> - diese Dateien sollten unverändert
  gelassen werden).</p><p>Das neue Datenverzeichnis sollte bevorzugt einen Namen im
  Format <code class="filename">data_stadt_landeskuerzel</code> haben, z.B.
  <code class="filename">data_hamburg_de</code> (alles Kleinbuchstaben). Beim
  Starten von BBBike muss dieses neue Datenverzeichnis angegeben
  werden:
  </p><pre class="programlisting"> bbbike -datadir data_hamburg_de</pre><p>
  Achtung: da manche BBBike-Tools
  sich auf ein hart kodiertes <code class="filename">data</code>-Verzeichnis
  verlassen, könnten einige Editieroperationen fehlschlagen.
  Alternativ könnte man das neue Verzeichnis auch
  <code class="filename">data</code> nennen, aber ein git-Update würde dann zu
  Konflikten führen.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="alternatives"></a>12. Alternativen</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233476464"></a>12.1. Formular im WWW</h3></div></div></div><p>Ein Formular zum Eintragen von Straßendaten findet man <a class="ulink" href="http://bbbike.de/BBBike/html/newstreetform.html" target="_top">hier</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idm46037233473472"></a>12.2. Kommentare über Mapserver eintragen</h3></div></div></div><p>Aus dem <a class="ulink" href="http://bbbike.de/cgi-bin/bbbike.cgi?mapserver=1" target="_top">Mapserver-Interface</a>
heraus ist es möglich, Kommentare für einen bestimmten Punkt zu
schreiben. Dazu den Radiobutton <span class="guibutton">Details anzeigen</span>
auswählen und auf einen Punkt in der Karte klicken. Im aufpoppenden
Fenster kann ein formloser Kommentar eingetragen werden.</p></div></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm46037233685648" class="footnote"><p><a href="#idm46037233685648" class="para"><sup class="para">[1] </sup></a> Eine weitere Möglichkeit der
  Punktauswahl wäre eine normale Suche (dazu in den Suchmodus gehen).
  Nach der Suche müssen die Punkte per
  <span class="guimenu">Bearbeiten</span> &#8594; <span class="guimenuitem">Path to
  Selection</span> in die X11-Selection übertragen
  werden. Grundsätzlich muss
  <span class="guimenu">Suche</span> &#8594; <span class="guimenuitem">Straßennetz neu
  berechnen</span> ausgewählt werden, wenn eine
  gerade neu eingefügte Straße attributiert werden soll. </p></div></div></div></body></html>
