<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <!-- -*-html-*- -->
[% EDITWARNHTML %]
[% IF INCLUDE_FILE.defined;
   PROCESS $INCLUDE_FILE;
   END;
-%]
[%
   UNLESS TITLE.defined; TITLE = "Berlin/Brandenburg - BBBike - Mapserver"; END;
   UNLESS HEADLINE_HTML.defined; HEADLINE_HTML = "Berlin/Brandenburg"; END;
   UNLESS MOREINFO_HTML.defined; MOREINFO_HTML = ""; END;
   UNLESS EXTRA_LAYERS.size > 0; EXTRA_LAYERS = []; END;
-%]
[% SET style="new" -%]
<html>
<head><title>[% TITLE | html %]</title>
<base href="[% MAPSERVER_URL %]/brb.html">
<link rel="stylesheet" type="text/css" href="[% BBBIKE_HTML_RELURL %]/bbbike.css">
<link rel="stylesheet" type="text/css" href="brb.css">
<script type="text/javascript" src="brb.js"></script>
</head>
<body bgcolor=#FFFFFF onload="init()">

<noscript>
<div class="msg">BBBike/Mapserver benötigt Javascript für den vollständigen Funktionsumfang. Ohne Javascript funktioniert beispielsweise das Zoomen, Suchen und die Detailanzeige nicht.</div>
</noscript>

<form name="map" target="_self" method=GET
      action="[% IF SMALLDEVICE %][% BBBIKE_CGI_RELURL %]/mapserver_setcoord.cgi[% ELSE %][program][% END %]"
      onsubmit="return redirect_form(this)">

<table summary="" border=0 cellspacing=0 cellpadding=0>
<tr>
<td valign="top" align=left>
  <table summary="Map with navigation" cellpadding="0" cellspacing="0" border="0">
    <tr>
     <td align="left"><input onclick="return move_map(-1,-1)" class="smb1" type="button" value="NW"></td>
     <td align="center"><input onclick="return move_map(0,-1)" class="smb2" type="button" value="N"></td>
     <td align="right"><input onclick="return move_map(1,-1)" class="smb1" type="button" value="NO"></td>
    </tr>
    <tr>
     <td style="vertical-align:middle;"><input onclick="return move_map(-1,0)" class="smb" type="button" value="W"></td>
     <td>
      <table summary="" cellpadding="0" cellspacing="1" border="0" bgcolor="#000000">
       <tr>
        <td><INPUT NAME="img" TYPE="image" SRC="[img]" width="[% IMGWIDTH %]" height="[% IMGHEIGHT %]" border=0></td>
       </tr>
      </table>
     </td>
     <td style="vertical-align:middle;"><input onclick="return move_map(1,0)" class="smb" type="button" value="O"></td>
    </tr>
    <tr>
     <td></td>
     <td>
      <table summary="" class="pwrdb">
       <tr>
        <td class="pwrd">&nbsp;Powered by <a href="http://mapserver.gis.umn.edu/">MapServer</a> &amp; <a href="[% BBBIKE_SF_WWW %]">BBBike</a></td>
        <td align="right"><img title="" alt="scalebar" src="[scalebar]"></td>
       </tr>
      </table>
     </td>
    </tr>
    <tr>
     <td align="left"><input onclick="return move_map(-1,1)" class="smb" type="button" value="SW"></td>
     <td align="center"><input onclick="return move_map(0,1)" class="smb2" type="button" value="S"></td>
     <td align="right"><input onclick="return move_map(1,1)" class="smb" type="button" value="SO"></td>
    </tr>
    <tr>
     <td></td>
     <td>
      <table summary="" cellpadding="0" cellspacing="1" border="0">
       <tr>
        <td bgcolor="#000000">
         <INPUT NAME="ref" TYPE="image" SRC="[ref]" border="0" onclick="return force_browse_move_mode()">
        </td>
        <td>&nbsp;</td>
        <td>
         <input type="hidden" name="map" value="[map]">
          Andere Übersichtskarte:<br>
[%# XXX Should use SCOPES, but value is not defined yet... -%]
          <input class="hfb" type="button" onclick="return change_map('inner-b')" value="Berliner Innenstadt"><br>
          <input class="hfb" type="button" onclick="return change_map('b')      " value="Berlin"><br>
          <input class="hfb" type="button" onclick="return change_map('p')      " value="Potsdam"><br>
          <input class="hfb" type="button" onclick="return change_map('brb')    " value="Brandenburg"><br>
          <input class="hfb" type="button" onclick="return change_map('wide')   " value="Nordostdeutschland"><br>
        </td>
       </tr>
      </table>
     </td>
    </tr>
  </table>
</td>
<td>&nbsp;&nbsp;</td>
<td valign="top" bgcolor=#ffffff>
  <center><h1>[% HEADLINE_HTML %]</h1></center>
  [% MOREINFO_HTML %]
  <table summary="" cellpadding="5" cellspacing="0" border="0" bgcolor="#ffffff">
    <tr><td>

      <b>Darzustellende Ebenen: </b><small><a href="help.html#layers" onclick="return help('layers')">(Hilfe)</a></small><br>
      <div class="lyrchk">
      <label><input type="checkbox" name="layer" value="qualitaet" [qualitaet_check]> Qualität</label><br>
      <label><input type="checkbox" name="layer" value="handicap" [handicap_check]> sonstige Behinderungen</label><br>
      <label><input type="checkbox" name="layer" value="radwege" [radwege_check]> Radwege</label><br>
      <label><input type="checkbox" name="layer" value="blocked" [blocked_check]> gesperrte Straßen</label><br>
      <label><input type="checkbox" name="layer" value="bahn" [bahn_check]> Bahnlinien und Bahnhöfe</label><br>
      <label><input type="checkbox" name="layer" value="gewaesser" [gewaesser_check]> Gewässer</label><br>
      <label><input type="checkbox" name="layer" value="faehren" [faehren_check]> Fähren</label><br>
      <label><input type="checkbox" name="layer" value="flaechen" [flaechen_check]> Parks, Wälder</label><br>
      <label><input type="checkbox" name="layer" value="grenzen" [grenzen_check]> Grenzen</label><br>
      <label><input type="checkbox" name="layer" value="ampeln" [ampeln_check]> Ampeln</label><br>
      <label><input type="checkbox" name="layer" value="sehenswuerdigkeit" [sehenswuerdigkeit_check]> Sehenswürdigkeiten</label><br>
      <label><input type="checkbox" name="layer" value="obst" [obst_check]> Obst</label><br>
      <label><input type="checkbox" name="layer" value="orte" [orte_check]> Orte</label><br>
      <label><input type="checkbox" name="layer" value="fragezeichen" [fragezeichen_check]> Fragezeichen</label><br>
      <label><input type="checkbox" name="layer" value="route" [route_check]> Route/Markierung</label><br>
[% FOR layer = EXTRA_LAYERS -%]
      <label><input type="checkbox" name="layer" value="[% layer.name %]" [[% layer.name %]_check]> [% layer.label %]</label><br>
[% END -%]
      </div>

      <p>
      <b>Bei Klick in die Karte:</b><br>
[% IF style == "new" %]
      <input type="hidden" name="mode" />
      <input type="hidden" name="zoomdir" />
      <label><input type="radio" name="mode_or_zoomdir" value="0" [zoomdir_0_check] onclick="change_mode_or_zoomdir()">&nbsp;Karte bewegen</label>
        <small><a href="help.html#query" onclick="return help('move')">(Hilfe)</a></small>
	<br>
      <label><input type="radio" name="mode_or_zoomdir" value="1" [zoomdir_1_check] onclick="change_mode_or_zoomdir()">&nbsp;Hineinzoomen</label>
        <small><a href="help.html#query" onclick="return help('zoomin')">(Hilfe)</a></small>
	<br>
      <label><input type="radio" name="mode_or_zoomdir" value="-1" [zoomdir_-1_check] onclick="change_mode_or_zoomdir()">&nbsp;Herauszoomen</label>
        <small><a href="help.html#query" onclick="return help('zoomout')">(Hilfe)</a></small>
	<br>
      <label><input type="radio" name="mode_or_zoomdir" value="nquery" onclick="change_mode_or_zoomdir()">&nbsp;Details anzeigen</label>
        <small><a href="help.html#query" onclick="return help('query')">(Hilfe)</a></small>
	<br>
      <label><input type="radio" name="mode_or_zoomdir" value="searchroute" onclick="change_mode_or_zoomdir()"> Start/Zielpunkt setzen</label>
	<small>(experimentell! - <a href="help.html#search" onclick="return help('search')">Hilfe</a>)</small>
      <p>

[% ELSE %]
      <label><input type="radio" name="mode" value="browse" onclick="toggled_searchroute_mode();" checked> <b>Karte zoomen/bewegen</b></label>
        <small><a href="help.html#browse" onclick="return help('browse')">(Hilfe)</a></small><br>
      <label><input type="radio" name="mode" value="nquery" onclick="toggled_searchroute_mode();"> <b>Merkmale anzeigen</b></label>
        <small><a href="help.html#query" onclick="return help('query')">(Hilfe)</a></small>
      <p>
      <label><input type=radio name=zoomdir value=1 [zoomdir_1_check] onclick="set_gui_browse_mode()">&nbsp;Hineinzoomen</label><br>
      <label><input type=radio name=zoomdir value=0 [zoomdir_0_check] onclick="set_gui_browse_mode()">&nbsp;Bewegen</label><br> 
      <label><input type=radio name=zoomdir value=-1 [zoomdir_-1_check] onclick="set_gui_browse_mode()">&nbsp;Herauszoomen</label>
[% END %]

      <p>
      Zoomstufe <input type=text name=zoomsize size=4 value=[zoomsize]> <small><a href="help.html#zoomin" onclick="return help('zoomin')">(Hilfe)</a></small>
      <p>

<!-- Does not work...
      Bildgröße:<br>
      <input type=radio name=imgsize value="250 250" Xmapsize_250_250_checkX>&nbsp;250x250<br>
      <input type=radio name=imgsize value="550 550" Xmapsize_550_550_checkX>&nbsp;550x550<br>
      <input type=radio name=imgsize value="800 800" Xmapsize_800_800_checkX>&nbsp;800x800<br>
-->
      <center><input type="submit" value="Neu zeichnen" onclick="adjust_for_redraw()"></center>

[% IF style != "new" %]
<input type="radio" name="mode" value="searchroute" onclick="toggled_searchroute_mode();"> Start/Zielpunkt setzen <small>(experimentell! - <a href="help.html#search" onclick="return help('query')">Hilfe</a>)</small>
[% END %]

      <h3>Legende</h3>
      <img title="" alt="legend" src="[legend]">

      <br>Maßstab: 1:[scale] <small><a href="help.html#scale" onclick="return help('scale')">(Hilfe)</a></small>

      <br>Letzte Aktualisierung der Daten:
          [%
	     USE file("data/strassen.shp");
	     USE date;
	     date.format(file.mtime, "%Y-%m-%d");
          %]
    </td></tr></table>

  </td></tr>

 <tr><td style="padding-top:3px"></td></tr>

 <tr>
  <td colspan="3">
      <p class="ftr">
       <a id="bbbikemail" href="mailto:slaven@rezic.de">E-Mail</a> |
       <a href="help.html">Info</a> |
       <a id="bbbikeurl" href="[% BBBIKE_URL %]">BBBike</a> |
       <a href="[% BBBIKE_CGI_RELURL %]/mapserver_address.cgi?[get_layers];mapext=[mapext_esc]">Adresssuche</a>
      </p>
  </td>
 </tr>

</table>

<input type="hidden" name="orig_mode" value="[orig_mode]">
<input type="hidden" name="orig_zoomdir" value="[orig_zoomdir]">

<input type="hidden" name="imgxy" value="[% IMGWIDTH / 2 %] [% IMGHEIGHT / 2 %]">
<input type="hidden" name="imgext" value="[mapext]">
<input type="hidden" name="savequery" value="true">
<input type="hidden" name="imgsize" value="[mapsize]">

<input type="hidden" name="program" value="[program]">

<input type="hidden" name="bbbikeurl" value="[bbbikeurl]">
<input type="hidden" name="bbbikemail" value="[bbbikemail]">
<input type="hidden" name="startc" value="[startc]">
<input type="hidden" name="coordset" value="">

</form>

</body></html>

